!function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r(r.s=13)}([,,,,,,,function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},,,,,,function(e,t,r){r(14),r(15),r(16),r(17),r(18),r(19),e.exports=r(20)},function(e,t,r){(function(e){var t,r={dswVersion:1,applyImmediately:!0,appShell:["/dsw.js","/index.html"],enforceSSL:!0,keepUnusedCaches:!1,dswRules:{images:{match:{extension:["jpg","gif","png","jpeg"]},apply:{cache:{name:"cachedImages",version:"1"}}},statics:{match:{extension:["js","css","woff","woff2"]},apply:{cache:{name:"static-files",version:"1",expires:"1d"}}},"static-html":{match:[{extension:["html"]},{path:"/$"}],strategy:"fastest",apply:{cache:{name:"static-html-files",version:"1"}}},pageNotFound:{match:{status:[404]},apply:{fetch:"/404.html"}},imageNotFound:{match:{status:[404,500],extension:["jpg","gif","png","jpeg","webp"]},apply:{fetch:"/404.jpg"}}}};!function e(r,n,a){function s(i,c){if(!n[i]){if(!r[i]){if(!c&&("function"==typeof t&&t))return t(i,!0);if(o)return o(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var d=n[i]={exports:{}};r[i][0].call(d.exports,function(e){var t=r[i][1][e];return s(t||e)},d,d.exports,e,r,n,a)}return n[i].exports}for(var o="function"==typeof t&&t,i=0;i<a.length;i++)s(a[i]);return s}({1:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t){var r=void 0,n=Number.MAX_SAFE_INTEGER,a=void 0;return t.forEach(function(t){var s=new RegExp(t.rx),o=e.match(s);o&&o.length<n&&(r=t,n=o.length,a=o)}),!!r&&{rule:r,matching:a}}},{}],2:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=o(e("./indexeddb-manager.js")),a=o(e("./utils.js")),s=o(e("./logger.js"));function o(e){return e&&e.__esModule?e:{default:e}}var i=null,c=void 0,u=void 0;var d={setup:function(e,t,r){c=e,u=r,i=t.dswVersion||"1",n.default.setup(d),n.default.create({version:1,name:"cacheCreatedTime",key:"url"})},registeredCaches:[],createDB:function(e){return n.default.create(e)},deleteUnusedCaches:function(e){if(!e)return caches.keys().then(function(e){return d.registeredCaches,Promise.all(e.map(function(e){if(d.registeredCaches.indexOf(e)<0)return caches.delete(e)}))})},clear:function(e){return"window"in self?window.DSW.sendMessage({clearEverythingUp:!0},!0):caches.keys().then(function(e){var t=e.map(function(e){return caches.delete(e)});return t.push(n.default.clear()),Promise.all(t)})},mountCacheId:function(e){if("string"==typeof e)return e;var t=!!e&&e.action.cache;return t?(t.name||"defaultDSWCached")+"::"+(t.version||i):"defaultDSWCached::"+i},register:function(e){d.registeredCaches.push(d.mountCacheId(e))},addAll:function(e){return new Promise(function(t,r){Array.isArray(e)&&(e={files:e});var n=[];e.files.map(function(t){n.push(d.add(t,null,null,{action:{fetch:t,cache:{name:e.name,version:e.version||1,expires:e.expires||!1}}}))}),Promise.all(n).then(t).catch(r)})},put:function(e,t,r){return d.add(t,"string"==typeof e?e:d.mountCacheId(e),r,e)},add:function(e,t,r,n){return t=t||d.mountCacheId(n),new Promise(function(o,i){function l(r){200==r.status||"opaque"==r.type?caches.open(t).then(function(i){var u="opaque"==r.type?{mode:"no-cors"}:{};0!==(e.url||e).indexOf("http")&&(e=a.default.fixURL(e.url||e)),"POST"!=(e=a.default.createRequest(e,u)).method&&function(){var a={};a=n&&n.action&&n.action.cache?n.action.cache:{name:t,version:t.split("::")[1]};var o=void 0;r.bodyUsed?i.add(e).then(function(t){c.traceStep(e,"Added to cache",{cacheData:a})}).catch(function(e){s.default.error("Could not save into cache",e)}):(o=r.clone(),c.traceStep(e,"Added to cache",{cacheData:a}),i.put(e,o))}(),o(r),n&&n.action&&n.action.cache&&n.action.cache.expires&&d.setExpiringTime(e,n||t,n.action.cache.expires)}).catch(function(e){s.default.error("Could not save into cache",e),o(r)}):i(r)}r?l(r):fetch(u(null,e)).then(l).catch(function(t){c.traceStep(e,"Fetch failed"),s.default.error("[ DSW ] :: Failed fetching "+(e.url||e),t),i(r)})})},setExpiringTime:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;"string"==typeof r&&(r=function(e,t){var r=t||-1;if("string"==typeof r){var n={s:1,m:60,h:3600,d:86400,w:604800,M:2592e3,Y:31449600},a=r.slice(-1),o=r.slice(0,-1);n[a]?r=o*n[a]:(s.default.warn("Invalid duration "+r,e),r=-1)}return r>=0?1e3*parseInt(r,10):0}(t,r)),n.default.addOrUpdate({url:e.url||e,dateAdded:(new Date).getTime(),expiresAt:r},"cacheCreatedTime")},hasExpired:function(e){return new Promise(function(t,r){n.default.find("cacheCreatedTime","url",e.url||e).then(function(e){e&&(new Date).getTime()>e.dateAdded+e.expiresAt?t(!0):t(!1)}).catch(function(e){t(!1)})})},get:function(e,t,r,o,i){var l=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],f=Object.keys(e.action)[0],h=t.url||t,p=new URL(h).pathname;!1===e.action.cache||"/"!=p&&!p.match(/^\/index\.([a-z0-9]+)/i)||(e.action.cache=e.action.cache||{});var g=e.options||{};g.headers=g.headers||new Headers,f="idb"==(f=f.toLowerCase())?"indexeddb":f;var v=void 0,m=null;switch(v=e.action.cache&&e.action.cache.expires?d.hasExpired(t):Promise.resolve(),f){case"bypass":if("request"==e.action[f]){var y=function(e){return e.status>=200&&e.status<300?(c.traceStep(r.request,"Request bypassed"),e):(c.traceStep(r.request,"Bypassed request failed and was ignored"),new Response(""))};return fetch(u(null,r.request)).then(y).catch(y)}c.traceStep(r.request,"Bypassed request"),f="output",e.action[f]="";case"output":return c.traceStep(r.request,"Responding with string output",{output:(e.action[f]+"").substring(0,180)}),new Response(a.default.applyMatch(o,e.action[f]));case"indexeddb":return new Promise(function(a,s){function i(s){if(!s||200!=s.status)return h=t.url,p=new URL(h).pathname,c.traceStep(r.request,"Fetch failed",{url:t.url,status:s.status,statusText:s.statusText}),c.treatBadPage(s,p,r);var o=function(e){e?c.traceStep(r.request,"Could not save response into IndexedDB",{err:e}):c.traceStep(r.request,"Response object saved into IndexedDB"),a(s)};n.default.save(e.name,s.clone(),t,e).then(o).catch(o)}n.default.get(e.name,t).then(function(n){return n?(c.traceStep(r.request,"Found stored in IndexedDB"),i(n)):(c.traceStep(r.request,"Will fetch",{url:t.url,method:t.method}),u(e,t,r,o).then(i).catch(i))})});case"redirect":case"fetch":t=c.createRedirect(e.action.fetch||e.action.redirect,r,o),h=t.url,p=new URL(h).pathname;case"cache":return m=r.request.cachedFrom?r.request.cachedFrom:null,e.action.cache&&d.mountCacheId(e),v.then(function(n){var h=void 0;return n&&!i?(c.traceStep(r.request,"Cache was expired"),h=Promise.resolve()):h=caches.match(m||t),h.then(function(i){if(i&&200!=i.status)return c.traceStep(r.request,"Not found in cache",{url:t.url,status:i.status,statusText:i.statusText}),n?(c.traceStep(r.request,"Forcing "+(n?"expired ":"")+"from cache"),d.get(e,t,r,o,!0)):(l&&(c.rules[i.status]||[]).some(function(n,a){if(p.match(n.rx)&&(n.action.fetch||n.action.redirect))return c.traceStep(r.request,"Found fallback for failure",{rule:n,url:t.url}),i=u(e,t,r,o),!0}),i);if(i)return t.url==r.request.url?(c.traceStep(r.request,"Result found in cache",{url:r.request.url,cacheSource:r.request.cachedFrom||r.request.url}),i):(c.traceStep(r.request,"Redirecting",{from:r.request.url,to:t.url},!1,{url:t.url,id:t.requestId,steps:t.traceSteps,rule:e}),Response.redirect(t.url,302));if("redirect"==f)return c.traceStep(r.request,"Must redirect",{from:r.request.url,to:t.url},!1,{url:t.url,id:t.requestId,steps:t.traceSteps,rule:e}),Response.redirect(t.url,302);var h=function(i){return"opaque"==i.type?!1!==e.action.cache?(c.traceStep(r.request,"Added to cache (opaque)",{url:t.url}),d.add(a.default.createRequest(t,{mode:t.mode||"no-cors"}),d.mountCacheId(e),i,e)):i:(i.status||(i.status=404),200==i.status?(c.traceStep(r.request,"Received result OK (200)",{url:t.url}),!1!==e.action.cache?(c.traceStep(r.request,"Saving into cache",{url:t.url}),d.add(t,d.mountCacheId(e),i,e)):i):(c.traceStep(t,"Failed fetching",{url:t.url}),n?(s.default.warn("Cache for ",t.url||t,"had expired, but the updated version could not be retrieved from the network!\n","Delivering the outdated cached data"),c.traceStep(r.request,"Using expired cache",{note:"Failed fetching, loading from cache even though it was expired"}),d.get(e,t,r,o,!0)):c.treatBadPage(i,p,r)))};return l?(c.traceStep(r.request,"Will fetch",{url:t.url,method:t.method}),u(e,t,r,o).then(h).catch(h)):void 0})});default:return r}}};r.default=d},{"./indexeddb-manager.js":4,"./logger.js":5,"./utils.js":8}],3:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,a=e("./utils.js"),s=(n=a)&&n.__esModule?n:{default:n};var o=location.origin;r.default=function(e,t,r,n){var a=e?e.action.fetch||e.action.redirect:"";"string"==typeof t&&(t=s.default.fixURL(t),t=location.origin+t),a?(a=s.default.fixURL(a),a=location.origin+a):a=t.url||t;var i=void 0;try{i=new URL(a).origin==o}catch(e){throw new Error('The URL "'+a+'" is not valid and could not be parsed.')}if(a=s.default.applyMatch(n,a),t&&!e)return function(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=t.mode;a&&"navigate"!=a||(a=n?"cors":"no-cors");var s=new Request(e,{method:t.method||"GET",headers:t.headers||{},mode:a,cache:"default",redirect:"manual"});return t.body&&(s.body=t.body),s.requestId=(r?r.request:t).requestId,s.traceSteps=(r?r.request:t).traceSteps,s}(a,t,r,i);var c=Object.keys(e.action)[0],u=e.options||{};u.headers=u.headers||new Headers,!1===e.action.cache&&(u.headers.append("pragma","no-cache"),u.headers.append("cache-control","no-store,no-cache"),a=a+(a.indexOf("?")>0?"&":"?")+(new Date).getTime());var d={method:u.method||t.method,headers:u||t.headers,mode:"redirect"==c?t.mode||"same-origin":"cors",redirect:"redirect"==c?"manual":t.redirect};return i||(d.mode=t.mode||"no-cors"),(t=new Request(a||t.url,d)).requestId=(r?r.request:t).requestId,t.traceSteps=(r?r.request:t).traceSteps,"redirect"==c?Response.redirect(t.url,302):fetch(t,u)}},{"./utils.js":8}],4:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,a=e("./logger.js"),s=(n=a)&&n.__esModule?n:{default:n};var o,i={};function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"readwrite",r=i[e];return!!r&&r.transaction(e,t).objectStore(e)}var u={setup:function(e){o=e},clear:function(){var e=[],t=function(t){e.push(new Promise(function(e,r){var n=indexedDB.deleteDatabase(t);n.onsuccess=function(){e()},n.onerror=function(e){r(),s.default.error("Could not drop indexedDB database\n",e||this.error)},n.onblocked=function(e){r(),s.default.error("Could not drop indexedDB database, it was locked\n",e||this.error)}}))};for(var r in i)t(r);return Promise.all([].concat(e))},create:function(e){return new Promise(function(t,r){var n=indexedDB.open(e.name||"defaultDSWDB",parseInt(e.version,10)||void 0);function a(t,r,n){t.onversionchange=function(e){t.close()},i[r]||(i[r]=t),n(e)}n.onerror=function(t){r("Could not open the database (indexedDB) for "+e.name)},n.onupgradeneeded=function(r){var n,s=r.target.result,o={};e.key&&(o.keyPath=e.key),e.key&&!e.autoIncrement||(o.autoIncrement=!0),e.version?o.version=e.version:o.version=1,r.oldVersion&&r.oldVersion<o.version?s.deleteObjectStore(e.name):0===r.oldVersion&&(n=s.createObjectStore(e.name,o),e.indexes&&e.indexes.forEach(function(e){"string"==typeof e?n.createIndex(e,e,{}):n.createIndex(e.name,e.path||e.name,e.options)}),n.createIndex(e.key,e.key,{unique:!0})),a(s,e.name,t)},n.onsuccess=function(r){a(r.target.result,e.name,t)}})},get:function(e,t){return new Promise(function(r,n){caches.match(t).then(function(t){t?t.json().then(function(t){var n=c(e),a=!!n&&n.index(t.key),s=!!a&&a.get(t.value);s?(s.onsuccess=function(e){r(new Response(JSON.stringify(e.target.result),{headers:{"Content-Type":"application/json"}}))},s.onerror=function(e){r()}):r()}):r()})})},find:function(e,t,r){return new Promise(function(n,a){var s=c(e);if(s){var o=s.index(t).get(r);o.onsuccess=function(e){n(e.target.result)},o.onerror=function(e){a()}}else n()})},addOrUpdate:function(e,t){return new Promise(function(r,n){var a=c(t);if(a){var s=a.put(e);s.onsuccess=function(){r(e)},s.onerror=function(t){r(e)}}else r({})})},save:function(e,t,r,n){var a=this;return new Promise(function(i,u){t.json().then(function(t){var s=c(e),d=void 0;s?((d=s.put(t)).onsuccess=function(){var e={},a=n.action.indexedDB.key||"id";e.key=a,e.value=t[a],o.put("indexeddb-id-request",r,new Response(JSON.stringify(e),{headers:{"Content-Type":"application/json"}})),i()},d.onerror=function(e){u("Failed saving to the indexedDB!\n"+this.error)}):u("Failed saving into indexedDB...\n"+a.error)}).catch(function(e){s.default.error("Failed saving into indexedDB!\n",e.message||a.error,e),u("Failed saving into indexedDB:\n"+a.error)})})}};r.default=u},{"./logger.js":5}],5:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n="[  LG  ] :: ",a="[ INFO ] :: ",s="[ WARN ] :: ",o="[ FAIL ] :: ",i="[ STEP ] :: ",c={info:function(){var e=[].slice.call(arguments);e.unshift("color: blue"),e.unshift("%c "+a),console.info.apply(console,e)},log:function(){var e=[].slice.call(arguments);e.unshift("color: gray"),e.unshift("%c "+n),console.log.apply(console,e)},warn:function(){var e=[].slice.call(arguments);e.unshift("font-weight: bold; color: yellow; text-shadow: 0 0 1px black;"),e.unshift("%c "+s),console.warn.apply(console,e)},error:function(){var e=[].slice.call(arguments);e.unshift("font-weight: bold; color: red"),e.unshift("%c "+o),console.error.apply(console,e)},track:function(){var e=[].slice.call(arguments);e.unshift("font-weight: bold"),e.unshift("%c "+i),console.debug.apply(console,e)}};r.default=c},{}],6:[function(t,n,a){(function(e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=d(t("./logger.js")),s=d(t("./best-matching-rx.js")),o=d(t("./cache-manager.js")),i=d(t("./go-fetch.js")),c=d(t("./strategies.js")),u=d(t("./utils.js"));function d(e){return e&&e.__esModule?e:{default:e}}var l,f,h,p,g=!1,v=(e.it,[]),m=null,y={version:"1.12.2",build:"1538357317512",ready:null},S={};function w(){return m||(m=new URL(location.href).pathname.replace(/\/[^\/]+$/,"/"))}y.isOffline=y.offline=function(e){return!navigator.onLine},y.isOnline=y.online=function(e){return navigator.onLine};try{ServiceWorkerGlobalScope;self instanceof ServiceWorkerGlobalScope&&(g=!0)}catch(e){}g?(f={requestId:0,tracking:{},trackMoved:{},rules:{},addRule:function(e,t,r){this.rules[e]=this.rules[e]||[];var n={name:t.name,rx:r,strategy:t.strategy||"offline-first",action:t.apply};return this.rules[e].push(n),n.action.cache?o.default.register(n):!1===n.action.cache&&(n.strategy="online-first"),n},treatBadPage:function(e,t,r){var n=void 0;return f.traceStep(r.request,"Request failed",{status:e.status,statusText:e.statusText,url:e.url,type:e.type}),(f.rules[e&&e.status?e.status:404]||[]).some(function(e,a){var s=t.match(e.rx);if(s&&(e.action.redirect&&!e.action.fetch&&(e.action.fetch=e.action.redirect),e.action.fetch)){f.traceStep(r.request,"Found fallback rule",e,!1,{url:r.request.url,id:r.request.requestId,steps:r.request.traceSteps});var i=new Request(e.action.fetch);return i.requestId=r.request.requestId,i.traceSteps=r.request.traceSteps,n=o.default.get(e,i,r,s),!0}}),n||f.traceStep(r.request,"No fallback found. Request failed"),n||e},setup:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.rootSWScope=w(),u.default.setup(f,r,y),o.default.setup(f,r,i.default),c.default.setup(f,o.default,i.default),y.ready=new Promise(function(a,s){l=r.appShell||[];var i=[];Object.keys(t.rules||t.dswRules).forEach(function(r){var n=r;(r=(t.rules||t.dswRules)[r]).name=n,r.action=r.action||r.apply;var a=r.action,s=void 0,o=void 0,c=void 0;if((r.match.length||Object.keys(r.match).length)&&Object.keys(r.match).length){Array.isArray(r.match)?(s=[],c=[],r.match.map(function(e){e.extension&&s.push(e.extension),e.path&&c.push(e.path)}),(s=s.join("|")).length&&(s+="|"),c=(c.join("|")||"")+"|"):(c=r.match.path||"",s=r.match.extension,o=r.match.status);s=Array.isArray(s)?"([.+]?)("+s.join("([/&?]|$)|")+"([/&?]|$))":"string"==typeof s?"([.+]?)("+s+"([/&?]|$))":"";var u=new RegExp(c+(s?"((\\.)(("+s+")([\\?&/].+)?))":""),"i"),d=/\$[0-9]+/;(a.fetch&&!a.fetch.match(d)||a.redirect&&!a.redirect.match(d)||a.cache&&a.cache.from)&&l.push({url:a.cache&&a.cache.from?a.cache.from:a.fetch||a.redirect,rule:r}),a.indexedDB=a.indexedDB||a.idb||a.IDB||void 0,a.indexedDB&&i.push(a.indexedDB),(o=Array.isArray(o)?o:[o||"*"]).forEach(function(t){200==t&&(t="*");e.addRule(t,r,u)})}}),e.addRule("*",{name:"serviceWorker",strategy:"fastest",match:{path:/^\/dsw.js(\?=dsw-manager)?$/},apply:{cache:{}}},location.href);if(e.addRule("*",{name:"rootDir",strategy:"fastest",match:{path:w()},apply:{cache:{}}},/^(\/|\/index(\.[0-1a-z]+)?)$/),l.unshift(w()),l.length||i.length)return Promise.all(l.map(function(e){var t=e.url||e;return o.default.add(t,null,null,e.rule).catch(function(e){if(e&&404==e.status)throw v.push(e.url),new Error("Failed storing appshell.\n "+v.join(",")+" failed loading.\n")})}).concat(i.map(function(e){return o.default.createDB(e).catch(function(e){throw new Error("Failed preparing IndexedDB\n",e.message||e)})}))).then(function(e){a()}).catch(function(e){var t="Could not register the service worker.\n"+(e.url||e.message)+"\n";n.default.error(t,e),s(t)});a()})},getRulesBeforeFetching:function(){return this.rules["*"]||!1},createRequest:function(e,t,r){return(0,i.default)(null,e,t,r)},createRedirect:function(e,t,r){return(0,i.default)(null,e,t,r)},traceStep:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(Array.isArray(e))e.forEach(function(e){f.traceStep(e,t,r,n,a)});else{if(f.tracking){e.requestId;e.traceSteps=e.traceSteps||[],r=r||{},n&&(r.url=e.url,r.type=e.type,r.method=e.method,r.redirect=e.redirect,r.referrer=e.referrer);var s=(performance.now()-e.timeArriving)/1e3;e.traceSteps.push({step:t,data:r,timing:s.toFixed(4)+"s"})}a&&(f.trackMoved[a.url]=a)}},respondItWith:function(e,t){e.respondWith(new Promise(function(r,n){"function"==typeof t.then?t.then(function(t){if("function"!=typeof t.clone)return r(t);var n=t.clone();f.tracking&&302!=n.status&&n.text().then(function(t){(t[0]||"").charCodeAt(0)<128&&(t=t.substring(0,180)+(t.length>180?"...":"")),f.traceStep(e.request,"Responded",{response:{status:n.status,statusText:n.statusText,type:n.type,method:n.method,url:n.url},preview:t},!0),f.sendTraceData(e)}),r(t)}):r(t)}))},sendTraceData:function(e){var t=void 0,r=function(t,r){var n={id:e.request.requestId,src:e.request.traceSteps[0].data.url,method:e.request.traceSteps[0].data.method,steps:e.request.traceSteps};n.src!=e.request.url&&(n.redirectedTo=e.request.url),t.postMessage(n)};for(t in f.tracking)if(e.request.url.match(t)){f.tracking[t].ports.forEach(r);break}e.request.traceSteps&&e.request.traceSteps.length&&delete f.trackMoved[e.request.traceSteps[0].data.url]},broadcast:function(e){return clients.matchAll().then(function(t){t.forEach(function(t){t.postMessage(e)})})},startListening:function(){self.addEventListener("fetch",function(e){if(f.requestId=1+(f.requestId||0),f.trackMoved[e.request.url]){var t=f.trackMoved[e.request.url];e.request.requestId=t.id,e.request.traceSteps=t.steps,e.request.originalSrc=t.url,t.rule&&t.rule.action&&t.rule.action.cache&&t.rule.action.cache.from&&(e.request.cachedFrom=t.rule.action.cache.from),delete f.trackMoved[e.request.url]}else e.request.requestId=f.requestId,e.request.timeArriving=performance.now(),f.traceStep(e.request,"Arrived in Service Worker",{},!0);var n=new URL(e.request.url),a=n.origin==location.origin,o=n.pathname;if("GET"!=e.request.method)return f.traceStep(e.request,"Ignoring "+e.request.method+" request",{}),void f.sendTraceData(e);if(!Object.keys(f.rules).length)return f.setup(r).then(function(t){return fetch(e)});if(r.enforceSSL&&"https:"!=n.protocol&&"localhost"!=n.hostname)return f.traceStep(e.request,"Redirected from http to https"),f.respondItWith(e,Response.redirect(e.request.url.replace("http:","https:"),302));var u=void 0;if(u=a?(0,s.default)(o,f.rules["*"]):(0,s.default)(n.origin+n.pathname,f.rules["*"]))return f.traceStep(e.request,'Best matching rule found: "'+u.rule.name+'"',{rule:u.rule,url:e.request.url}),f.respondItWith(e,c.default[u.rule.strategy](u.rule,e.request,e,u.matching));if(!a)return f.traceStep(e.request,"Ignoring request because it is not from same origin and there are no rules for it",{}),void f.sendTraceData(e);var d=function(t){return!t||200!=t.status&&"opaque"!=t.type&&"opaqueredirect"!=t.type?f.treatBadPage(t,o,e):t};return f.respondItWith(e,fetch((0,i.default)(null,e.request)).then(d).catch(d))})}},h=!1,p=null,self.addEventListener("activate",function(e){var t;e.waitUntil((t=[],r.applyImmediately&&t.push(self.clients.claim()),t.push(o.default.deleteUnusedCaches(r.keepUnusedCaches)),Promise.all(t).then(function(e){f.broadcast({DSWStatus:h,error:p||null})}).catch(function(e){f.broadcast({DSWStatus:h,error:e||p})})))}),self.addEventListener("install",function(e){return r.dswRules=r.rules||r.dswRules||{},r.dswVersion=r.version||r.dswVersion||"1",r.applyImmediately?e.waitUntil(f.setup(r).then(function(e){h=!0,self.skipWaiting()}).catch(function(e){h=!1,p=e,self.skipWaiting()})):e.waitUntil(f.setup(r))}),self.addEventListener("message",function(e){var t=e.ports;if(e.data.trackPath){var r=e.data.trackPath;f.tracking[r]={rx:new RegExp(r,"i"),ports:t}}else if(e.data.clearEverythingUp)o.default.clear().then(function(e){t.forEach(function(e){e.postMessage({cacheCleaned:!0})})});else if(e.data.enableMocking){var n=e.data.enableMocking.mockId+e.data.enableMocking.match;S[e.source.id]=S[e.source.id]||{};var a=S[e.source.id];return a[n]=a[n]||[],void S[n].push()}}),self.addEventListener("sync",function(e){}),f.startListening()):function(){y.status={version:r.version||r.dswVersion,registered:!1,sync:!1,appShell:!1};var e,t=void 0,a=void 0,s=void 0,i=void 0,c=(e={},{addEventListener:function(t,r){e[t]=e[t]||[],e[t].push(r)},trigger:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=void 0;try{if(e[t]){var s=!0,o=!1,i=void 0;try{for(var c,u=e[t][Symbol.iterator]();!(s=(c=u.next()).done);s=!0)"function"==typeof(a=c.value)&&a(r)}catch(e){o=!0,i=e}finally{try{!s&&u.return&&u.return()}finally{if(o)throw i}}}"function"==typeof y[a="on"+t]&&y[a](r)}catch(e){a=a&&a.name?a.name:a||"annonymous",n.default.error("Failed trigerring event "+t+" on listener "+a,e.message,e)}}});y.addEventListener=c.addEventListener,y.onenabled=function(){},y.onregistered=function(){},y.onunregistered=function(){},navigator.serviceWorker.addEventListener("message",function(e){t&&void 0!==e.data.DSWStatus&&(s&&(e.data.DSWStatus?(y.status.appShell=!0,c.trigger("activated",y.status),t(y.status)):(y.status.appShell=!1,y.status.error=e.data.error,a(y.status),s.unregister())),t=!1,a=!1),c.trigger(e.data.event,e.data.data)}),y.trace=function(e,t,r){r||"function"!=typeof t||(r=t,t={});var n=new MessageChannel;n.port1.onmessage=function(e){r(e.data)},navigator.serviceWorker.controller.postMessage({trackPath:e},[n.port2])},y.enableMocking=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".*",r=new MessageChannel;navigator.serviceWorker.controller.postMessage({enableMocking:{mockId:e,match:t}},[r.port2])},y.disableMocking=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".*",r=new MessageChannel;navigator.serviceWorker.controller.postMessage({disableMocking:{mockId:e,match:t}},[r.port2])},y.sendMessage=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise(function(r,n){var a=new MessageChannel;t?a.port1.onmessage=function(e){e.data.error?n(e.data.error):r(e.data)}:setTimeout(r,10),navigator.serviceWorker.controller.postMessage(e,[a.port2])})},y.onNetworkStatusChange=function(e){var t=function(){e(navigator.onLine)};window.addEventListener("online",t),window.addEventListener("offline",t),navigator.onLine||t()},y.isAppShellDone=y.isActivated=function(e){return y.status.registered&&y.status.appShell},y.isRegistered=function(e){return y.status.registered},y.unregister=function(e){return new Promise(function(e,t){y.status&&(y.status.registered||e(y.status)),y.ready.then(function(r){o.default.clear().then(function(r){r?(y.status.appShell=!1,localStorage.setItem("DSW-STATUS",JSON.stringify(y.status)),s.unregister().then(function(r){r?(y.status.registered=!1,y.status.sync=!1,y.status.ready=!1,localStorage.setItem("DSW-STATUS",JSON.stringify(y.status)),e(y.status),c.trigger("unregistered",y.status)):t("Could not unregister service worker")})):t("Could not clean up the caches")})})})},y.setup=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return y.ready?y.ready:new Promise(function(r,o){if(y.ready=new Promise(function(r,o){var u=new Promise(function(e,r){t=function(){clearTimeout(i),e(y.status)}});if(a=function(e){clearTimeout(i),o(e||"Installation timeout")},navigator.serviceWorker)if(navigator.serviceWorker.controller)e&&e.trace?navigator.serviceWorker.ready.then(function(t){s=t;var r=void 0;for(r in e.trace)y.trace(r,e.trace[r])}):navigator.serviceWorker.ready.then(function(e){s=e}),y.status=JSON.parse(localStorage.getItem("DSW-STATUS"))||y.status,r(y.status);else{i=setTimeout(function(e){o("Registration timed out")},e.timeout||12e3);var d=new Promise(function(e){"complete"===document.readyState?e(document):document.addEventListener("DOMContentLoaded",function(){e(document)})});Promise.all([d,navigator.serviceWorker.register("/OneSignalSDKWorker.js")]).then(function(t){s=t,y.status.registered=!0,navigator.serviceWorker.ready.then(function(t){y.status.ready=!0,c.trigger("registered",y.status),Promise.all([u,new Promise(function(t,r){e&&e.sync?"SyncManager"in window?navigator.serviceWorker.ready.then(function(e){return e.sync.register("syncr")}).then(function(e){y.status.sync=!0,t()}):(y.status.sync="Failed enabling sync",t()):t()})]).then(function(e){localStorage.setItem("DSW-STATUS",JSON.stringify(y.status)),c.trigger("enabled",y.status),n.default.info("Service Worker was registered",y.status),r(y.status)})})}).catch(function(e){o({status:!1,sync:!1,sw:!1,message:"Failed registering service worker with the message:\n "+e.message,error:e})})}else y.status.fail="Service worker not supported"}),!y.isActivated())return y.ready.then(function(e){r(e)}).catch(function(e){o(e)})})},"undefined"!=typeof window&&(window.DSW=y)}(),a.default=y}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./best-matching-rx.js":1,"./cache-manager.js":2,"./go-fetch.js":3,"./logger.js":5,"./strategies.js":7,"./utils.js":8}],7:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,a=e("./utils.js"),s=(n=a)&&n.__esModule?n:{default:n};var o=void 0,i=void 0,c=void 0;function u(e,t,r,n){e.action.bundle&&(o.traceStep(r.request,"Will load and cache bundle in background",{bundle:e.action.bundle}),i.addAll(e.action.bundle).then(function(t){o.traceStep(r.request,"Bundle loaded and cached in background",{bundle:e.action.bundle})}).catch(function(t){o.traceStep(r.request,"Could not load and cache bundle",{bundle:e.action.bundle}),console.warn("Could not load and cache all the bundle files",t.message||t)}))}var d={setup:function(e,t,r){o=e,i=t,c=r},"offline-first":function(e,t,r,n){return u(e,0,r),o.traceStep(r.request,"Info: Using offline first strategy",{url:t.url}),i.get(e,t,r,n)},"online-first":function(e,t,r,n){function a(a){return 200==a.status?(e.action.cache&&i.put(e,t,a).then(function(e){o.traceStep(r.request,"Updated cache")}),a):i.get(e,t,r,n).then(function(e){var t=new URL(r.request.url).pathname;return e||o.treatBadPage(a,t,r)})}return u(e,0,r),o.traceStep(r.request,"Info: Using online first strategy",{url:t.url}),s.default.DSW.isOffline()?a(new Response("",{status:404,statusText:"Browser is offline",headers:{"Content-Type":"text/plain"}})):c(e,t,r,n).then(a).catch(a)},fastest:function(e,t,r,n){u(e,0,r),o.traceStep(r.request,"Info: Using fastest strategy",{url:t.url});var a=new URL(r.request.url).pathname,s=!1,d=!1,l=!1,f=!1;return new Promise(function(u,h){function p(n){n&&200==n.status&&e.action.cache&&i.put(e,t,n).then(function(e){o.traceStep(r.request,"Updated cache")}),d||(200==n.status?(s=!0,o.traceStep(r.request,"Fastest strategy resolved from network",{url:n.url||t.url}),u(n)):(o.traceStep(r.request,"Fastest strategy failed fetching",{status:n.status,statusText:n.statusText}),l=!0,g(n)))}function g(e){l&&f&&(o.traceStep(r.request,"Fastest strategy could not fetch nor find in cache"),u(o.treatBadPage(e,a,r)))}c(e,t.clone(),r,n).then(p).catch(p),i.get(e,t,r,n,!1,!1).then(function(e){if(e&&!s)return d=!0,o.traceStep(r.request,"Fastest strategy resolved from cached"),u(e),e;f=!0,s||g()}).catch(g)})}};r.default=d},{"./utils.js":8}],8:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={DSWManager:null,PWASettings:null,applyMatch:function(e,t){return e&&e.length>1&&t&&e.forEach(function(e,r){t=t.replace(new RegExp("\\$"+r,"i"),e)}),t},createRequest:function(e,t){var r={method:t.method||e.method||"GET",headers:t.headers||e.headers||new Headers,mode:t.mode||(t.redirect?"same-origin":"cors"),redirect:t.redirect||"manual",cache:"default"},n=new Request(e.url||e,r);return n.requestId=e.requestId,n},fixURL:function(e){return n.DSWManager.rootSWScope!=e?e.replace(/^([^http]|[^\/]|[^\.])/,n.DSWManager.rootSWScope+"/$1").replace(/([^\:])\/\//g,"$1"):e},setup:function(e,t,r){n.DSWManager=e,n.PWASettings=t,n.DSW=r}};r.default=n},{}]},{},[6])}).call(t,r(7))},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){}]);